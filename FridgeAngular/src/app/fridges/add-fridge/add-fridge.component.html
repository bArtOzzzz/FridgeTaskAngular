<form [formGroup]="fridgeForm" (ngSubmit)="onSubmit()">
    <!-- Main fridge create part -->
    <div class="form-group">
        <label for="manufacturer">Manufacturer:</label>
        <input formControlName="manufacturer" [ngClass]="{'is-invalid':submitted && fridgeForm.controls['manufacturer'].errors}" type="text" class="form-control" placeholder="Enter manufacturer">
        <div *ngIf="submitted && fridgeForm.controls['manufacturer'].errors" class="text-danger">
            <div *ngIf="submitted && fridgeForm.controls['manufacturer'].errors['required']">
                Manufacturer is required*
            </div>
            <div *ngIf="submitted && fridgeForm.controls['manufacturer'].errors['minlength']">
                Length must be 3-24 character*
            </div>
            <div *ngIf="submitted && fridgeForm.controls['manufacturer'].errors['maxlength']">
                Length must be 3-24 character*
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="ownerName">Name:</label>
        <input formControlName="ownerName" [ngClass]="{'is-invalid':submitted && fridgeForm.controls['ownerName'].errors}" type="text" class="form-control" placeholder="Enter your name">
        <div *ngIf="submitted && fridgeForm.controls['ownerName'].errors" class="text-danger">
            <div *ngIf="submitted && fridgeForm.controls['ownerName'].errors['required']">
                Name is required*
            </div>
            <div *ngIf="submitted && fridgeForm.controls['ownerName'].errors['minlength']">
                Length must be 3-24 character*
            </div>
            <div *ngIf="submitted && fridgeForm.controls['ownerName'].errors['maxlength']">
                Length must be 3-24 character*
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="modelId">Choose model:</label>
        <select formControlName="modelId" id="disable-select-field" [ngClass]="{'is-invalid':submitted && !isModelChecked && fridgeForm.controls['modelId'].errors}" class="form-control">
            <option *ngFor="let model of listModel$|async" [value]="model.id">{{model.modelName}}</option>
        </select>
        <div *ngIf="submitted && !isModelChecked && fridgeForm.controls['modelId'].errors" class="text-danger">
            <div *ngIf="submitted && fridgeForm.controls['modelId'].errors['required']">
                Model is required*
            </div>
        </div>
    </div>
    <!-- Create new model part -->
    <div class="form-check">
        <label>Create a new model</label>
        <input (click)="activeModelForm()" class="form-check-input" type='checkbox' id='newModelCheck' onchange='showOrHide("newModelCheck", "newModel", "disable-select-field");'/>
        <div class="additive-container" id="newModel" [formGroup]="modelForm" *ngIf="isModelChecked">
            <div class="form-group">
                <label for="modelName">Model:</label>
                <input formControlName="modelName" [ngClass]="{'is-invalid':submitted && modelForm.controls['modelName'].errors}" class="form-control" type="text" placeholder="Enter model name">
                <div *ngIf="submitted && modelForm.controls['modelName'].errors" class="text-danger">
                    <div *ngIf="submitted && modelForm.controls['modelName'].errors['required']">
                        Name is required*
                    </div>
                    <div *ngIf="submitted && modelForm.controls['modelName'].errors['minlength']">
                        Length must be 3-24 character*
                    </div>
                    <div *ngIf="submitted && modelForm.controls['modelName'].errors['maxlength']">
                        Length must be 3-24 character*
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="productionYear">Production year:</label>
                <input formControlName="productionYear" [ngClass]="{'is-invalid':submitted && modelForm.controls['productionYear'].errors}" class="form-control" type="number" min="1900" max="2022" placeholder="Year">
                <div *ngIf="submitted && modelForm.controls['productionYear'].errors" class="text-danger">
                    <div *ngIf="submitted && modelForm.controls['productionYear'].errors['required']">
                        Production year is required*
                    </div>
                    <div *ngIf="submitted && modelForm.controls['productionYear'].errors['min']">
                        The year may be from 1900 to 2022*
                    </div>
                    <div *ngIf="submitted && modelForm.controls['productionYear'].errors['max']">
                        The year may be from 1900 to 2022*
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Create new products part -->
    <div class="form-check">
        <label>Add products</label>
        <input (click)="activeProductFrom()" class="form-check-input" type='checkbox' id="newProductCheck" onchange='showOrHide("newProductCheck", "product-form-main");'>
        <div [formGroup]="productForm" id="product-form-main" *ngIf="isProductChecked">
            <div class="form-group" formArrayName="products">
                <div *ngFor="let product of productsFormArr.controls; let i=index">
                    <div [formGroupName]="i">

                        <div class="new-product-container">
                            <div class="row row-cols-2">
                                <div class="col"><p class="col point-number">Product â„–{{i + 1}}</p></div>
                                <div class="col delete-container">
                                    <a class="delete-button" (click)="deleteProduct(i)">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16"><path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/></svg>
                                    </a>
                                </div>
                            </div>
                            <div class="container">
                                <div class="row row-cols-2">
                                    <div class="col"><label>Product name:</label></div>
                                    <div class="col"><label>Quantity:</label></div>
                                </div>
                                <div class="row row-cols-2">
                                    <div class="col"><input formControlName="productName" class="form-control productItem" type="text" placeholder="Enter name"></div>
                                    <div class="col"><input formControlName="defaultQuantity" class="form-control productItem" type="number" placeholder="Enter quantity"></div>
                                </div>
                                <div class="row url-container">
                                    <div class="col"><label>Paste URL image:</label></div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <input type="text" formControlName="productImage" class="form-control input-url mb-3" placeholder="Paste image URL">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-flex button-product-container">
                    <a class="btn btn-warning" (click)="addNewProduct()">Add</a>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <button class="btn btn-success add-button float-end">Create fridge</button>
    </div>
</form>

